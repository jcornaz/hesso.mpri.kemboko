function [y1] = ann_predict(x1)
%ann_predict neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 30-May-2015 16:11:28.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = Qx28 matrix, input #1
% and returns:
%   y = Qx1 matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

x1 = x1'
% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [0.343787217653925;0.414013123296145;0.672978135532321;0.0967923555119775;0.0668793059750423;0.465899430552974;0.304871683118527;0.629426434694398;0.0717384528106845;0.124688378708049;0.0928043803434493;18.7660298312123;8.19554837333661;0.12413682016638;3.3580317313959;0.725864065887498;0.285410591004543;0.99992402158208;0.12185732311857;0.152461336747441;0.134879499970882;29.8812246792805;9.9717093451255;15.6338503497128;0.265646157320714;0.0844282623309563;0.0783784423723306;1.00536678699949];
x1_step1_gain = [0.0396297302486842;0.0577547565383971;0.0447337584531044;0.043698946179091;0.1394472833171;0.0174552527050572;0.0182318595397165;0.0351926210029457;0.0468967668378279;0.035792194106288;0.0420676070740895;0.00142766852527804;0.00286366317040426;0.249650422638247;0.242174480013896;0.0124068891018403;0.00965737832997542;0.0164834125223708;0.0220725547837382;0.0407108460169762;0.0210707078863879;0.00119567862698969;0.00130421239993802;0.00232798723082977;0.137922265258795;0.22202611335687;0.215516208570356;0.197847845327457];
x1_step1_ymin = -1;

% Layer 1
b1 = [0.17369228463597774503;-0.45012490935175542006;0.91020245253168596822;0.24474826517377104573;2.8683108955814153873;-0.35418350046405017162;0.77117364548194844431;1.0868331576417518125;-2.4869901545226302808;1.6344431438462299067];
IW1_1 = [1.3089432976023702704 2.5662717388535711827 0.05844881852599966704 -0.20981975333557878471 -2.1579400518333828884 1.5992580063062389328 -0.96502111341009932932 -0.33404422370127856423 1.0515058511374457684 -2.9847532904273137433 1.2009891732592565816 -0.86775876859932132845 -0.97171688415766765967 1.1738265476707765433 -0.42753727404291874681 1.1106847211921528906 -0.98378522812809443554 -1.2875665682713133275 -1.8479857846900991092 -2.0466324204163264255 1.2935316989250438269 0.82449174374632128171 -0.84981482352342541109 1.267243767901085949 0.6744146942032551717 2.6222391129232036633 0.44183085779165198748 0.81186388015531518736;0.73107478242415058212 -0.41986485589519351169 -0.62326474582605151387 -1.2393093230988172504 0.25729697055323424992 0.15957722311546615468 -0.40903080026756921672 -0.14703126627622534195 0.22619356461769929423 -0.25259671153548718392 -0.02779341903843671191 0.19713871985576111867 -0.96198170774629232493 1.3498984898652290898 -0.71253582360137701635 -0.59855059031062884944 -0.86500052747276678922 -0.19039342111507431832 -0.94802660174023634099 -0.12787182407454786293 0.6333553694127090905 -0.36903217520048509082 1.6125647373809823826 0.13421018262361747442 -0.95358978056665411049 0.49568077071100591358 0.55537131834160713417 -0.9945027112489641663;-0.91620753830242529503 0.30603960627539594785 -0.24515810452366723626 0.50825480595395899908 1.2214259386774091176 -0.64191200500312195487 -1.303584046927116491 0.98896444887433987425 1.3978757454205898991 -0.0030261865594625528275 0.12083524125386144177 -0.40118691136603079617 0.65171840503866484973 -0.10359804506767046617 -0.24197435878061621106 -0.46989070581713493491 -1.3424660344739178797 -0.0071360751348919122805 0.6574928641772348481 0.39135031223114380428 -0.044183431447390890401 -0.53410221279172520603 -0.33617087433745002079 0.70464146054483778325 0.66312627747751273777 0.6487521955869192114 -0.25583889018877231658 0.029123198749580306993;-0.064876867430980367235 -0.095932288125792228306 0.62355686182197889167 0.18953236778041515631 -0.32154559372316099397 0.32181828654249206023 0.4702430762228280714 0.85380423515956205271 0.99185789368177412761 0.90518317563738048825 0.14407599020865582973 -0.066666832915476786914 0.55127128076450226946 0.011083389214018631724 -0.091944875105419904271 0.48790056877167647942 0.35071807876270566506 0.87095606809526548986 0.47135659391306872212 0.052362497456277308505 -0.045056782310783236034 0.58927865171066207139 0.59481801415614266038 0.68029418113273254498 0.83154379292807278912 -0.62176336083385297382 1.0640726651322827134 0.023121483170613299496;1.0169088086680926342 -0.29209349200554368675 -1.0389250109182450732 0.28728752269694146637 -0.013014214793986161184 3.2303422037097586639 -3.0509176000393720685 -0.37202257919994624613 1.5011944679861415342 0.66575976172230844075 -0.84919450014092101586 2.6367406911113957513 0.89031993311174195682 -0.93957139809746204051 1.363462856170854387 1.0769618179882245457 -1.0840167080452991488 0.25942400145536242961 1.5939489079661832704 0.23482664880806586316 -1.8595827447449748693 -0.10139496374162745851 1.6978834327764180667 0.95073013498763703222 -1.9377435906683007083 0.0089883363761339239023 1.3942147300112734953 0.71368238298466057934;-1.8763282086767845147 0.12088515302515967509 0.29347762039834013326 0.46006740453014782766 0.30564883573392581662 -1.0283886246974471845 -1.2491745812535783866 0.69362705114682687846 0.57772882741617725966 -0.21523074401350578144 -0.1370077170300402214 0.30982732896494658004 0.090699101156585137939 0.065769042557153101214 0.17239357778127126219 0.19140140445072925668 -1.2001524847259503748 0.055653904199784290374 2.0607730112715358928 -1.2832168514825750272 -0.9854578622472633942 1.7827691459931291895 -0.22664141520498229387 -0.25087413420000703734 -0.79405879605138462995 0.56894369272352396383 0.5899853457325668904 0.43890844131577955167;0.021533619122863414258 -0.34913433779276387137 0.28876429770012007614 1.0120018591959953902 -0.4655304722381893856 -0.54267470034283582514 0.22898297149464921785 0.95981134669663970005 0.70475355050002841395 0.08474078538840715269 0.25296738854698247456 -0.52413207925970273227 1.2649851465370147707 -1.2900303381685023218 0.515327986910047664 -0.14611438071394577953 0.70812601093750326964 0.23039388196450480417 0.82584562139578243656 0.036462548328518445961 -0.081235312747232016339 0.51261826040165181517 -0.13795425277238046458 0.81341866277325225454 0.4624429998371370476 -0.81775288935029966098 0.64125096649912260993 0.045378173037113722632;-0.021482042757055189175 -0.062282666526244680194 -0.42496411066894274056 -0.098189415280132988362 -0.26349058996884971995 -0.36347842849795647391 -0.52160015125367908961 -0.067240344465219439862 -0.78671179404492919129 -0.17371996151863880464 -0.10900361546266663926 0.41135806164879185065 -0.20633101614152479786 0.035761409071215471966 -0.062506108502907234414 -0.68217510209849530067 -0.23124247255626481645 -0.37820935546499862001 -0.96395926126053621541 0.2889530905725145038 -0.35062232393942066588 -0.8402012251575651236 -0.15776387515392645278 -0.052346855029386678282 0.10556788060022714859 0.0072355196410175594973 -0.72997084373623855047 -0.7247403428913427037;0.53936167039053517502 0.35055271877602323105 0.67501540678810401097 -0.010847910470131279931 0.31939412692280233497 1.0276925121985807099 -2.9553588489644031512 -0.17119217186128857233 0.96789519545310842563 0.95877112340957793002 -1.4308117331245799875 0.80056016979578970005 0.43718167123214746184 0.35645485934123438687 1.4920381425611441983 -0.72154328475567641732 -2.6978408758758956054 -0.88802416763605740435 2.0094507670504189178 -0.38778750768310576991 -1.6345510332329744596 -0.77450358970709110018 -0.92454917148634929713 1.1482139982610677365 0.14384988163863282606 0.35784233304047086133 0.56073628002441011642 -0.34227847918418252693;2.0086338910834675708 -1.2514508313482963775 -0.10661386737804406932 -1.6154079113985917449 0.13583688292096249284 -0.023427898518448377063 0.36223428608522056926 -0.086278435881685308639 1.3342870894118088465 0.59534428151279950026 -1.551797714606325318 0.21232456149199802065 0.076281334098297653989 -0.91551369743194466189 1.4387261371764876738 0.1325765292746474977 0.42695157402748062925 -0.37462347339386786738 1.0280798253551346466 -0.22670098114721592975 0.32673978406734804913 2.3244465644651306491 -0.70874980831944511817 2.4516158833599170919 -1.0928830951259722593 0.35006804889635634304 0.31814831669747939413 1.7894040163535067656];

% Layer 2
b2 = [0.18052118845622402987;0.1998711799784999299;0.62818091963471389683;-0.93858404925629157489;0.64322187169381539462;-0.41494625443865673642;0.67952320620275818985;-0.50258739563291610075;-0.5893052440639918732;1.0761000175369097587;-0.083390005579579914996];
LW2_1 = [0.043923992899395643275 0.14384790669976127431 -1.5018666530763242761 -0.45139142941406662501 -1.3741499058204027506 1.9735108095792244232 -0.76410455590688242111 0.10814720917352479979 -3.4408341949918161973 3.2239129854590702351;4.4353957611308807429 0.061290891791598869909 0.19090838124725881264 0.047776785376153499407 -3.2014003533194230755 1.1355268002395475513 0.40930520942835829645 -1.0994275561901687421 -2.4416402361089297735 -3.2486819343672528326;3.7923160206612314127 1.7559151201392031449 1.5747540048583781314 0.032388384901547280503 3.5046591895638616876 2.0823695234654917563 0.84211088040998649529 0.20073060992845098705 -0.74551044415005340849 -2.0979292797277384608;3.3094816182997437437 1.5761506307549362216 0.26573826873814015981 -0.15671313962643274031 1.2268422821879600981 -1.1728958751848554964 -1.4107944450969069905 0.26674721656224581467 4.046714015678937848 5.0109166725388769592;1.6452143756147314946 -1.6618715261196033151 0.27248876021058177077 -1.0438103205439399623 -3.6427946416453487188 0.95447668071509894627 -0.3467074273830266784 -0.21631437564946973118 3.5299866671661286333 -1.1234986930613310996;-5.3957807830221549139 0.49514000326892471104 -1.372368867562866912 0.47810441268015341221 -1.1395529419702985496 -1.4691655237871448225 0.3217758987240655344 0.32758282856189585575 -5.7371129714278010781 -1.6765431568580193566;-2.9985974493114615491 0.82108957198741205907 0.96411921005108158766 -0.86424494866168322105 1.4193587952676220976 2.2485082266927709505 0.47992099712542507506 0.48483702606883355424 -1.497022225635700643 -2.8657256352996478554;-6.6482643694472356444 -1.5143722282344744823 0.25980639089919321805 0.40906800731870035515 -3.7440559902377041901 0.31709395075366358929 0.3251975363090989779 -0.53874988645135157839 3.4985362446420893434 2.9202972094458989893;-2.0888461550734049865 0.73879161574992002759 0.83942858657290597701 0.89192890232740684731 4.5185039294208015903 0.77333056292995905334 -0.68363908636190495738 -0.4179922228650765903 6.4976883420051265716 -3.1037630810054275265;-1.4473794109839066557 -1.7473714546620340293 0.99656477730370640611 1.4758006687289364489 2.8779620833278114489 0.84721378598526975168 3.1782099226174187478 -0.49030158721269362365 -0.030975561205686414495 2.877449889939374561;2.0371040568939102755 0.27699775348787875062 -1.6755030318043031556 -0.87903925945001937237 0.53277607630618939449 -6.2003161445206043112 -0.69161492468805318978 1.0291097597176617207 -2.7615571253231454563 -1.0736318704820000391];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = softmax_apply(repmat(b2,1,Q) + LW2_1*a1);

% Output 1
y1 = to_labelid_vector(a2');
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Competitive Soft Transfer Function
function a = softmax_apply(n)
nmax = max(n,[],1);
n = bsxfun(@minus,n,nmax);
numer = exp(n);
denom = sum(numer,1);
denom(denom == 0) = 1;
a = bsxfun(@rdivide,numer,denom);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end