function [y1] = ann_predict(x1)
%ann_predict neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 30-May-2015 10:54:15.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = Qx27 matrix, input #1
% and returns:
%   y = Qx1 matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

x1 = x1';

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [0.343787217653925;0.414013123296145;0.672978135532321;0.0967923555119775;0.0668793059750423;0.465899430552974;0.304871683118527;0.629426434694398;0.0717384528106845;0.124688378708049;0.0928043803434493;18.7660298312123;8.19554837333661;0.12413682016638;3.3580317313959;0.725864065887498;0.285410591004543;0.99992402158208;0.12185732311857;0.152461336747441;0.134879499970882;29.8812246792805;9.9717093451255;15.6338503497128;0.265646157320714;0.0844282623309563;1.00536678699949];
x1_step1_gain = [0.0396297302486842;0.0577547565383971;0.0447337584531044;0.043698946179091;0.1394472833171;0.0174552527050572;0.0182318595397165;0.0351926210029457;0.0468967668378279;0.035792194106288;0.0420676070740895;0.00142766852527804;0.00286366317040426;0.249650422638247;0.242174480013896;0.0124068891018403;0.00965737832997542;0.0164834125223708;0.0220725547837382;0.0407108460169762;0.0210707078863879;0.00119567862698969;0.00130421239993802;0.00232798723082977;0.137922265258795;0.22202611335687;0.197847845327457];
x1_step1_ymin = -1;

% Layer 1
b1 = [-1.7920732552823432915;-1.3221752708867151593;-1.1527804106348487068;-0.052598249486369499928;-0.49620325041084600848;-1.3597134165762374547;-1.2933374609368772923;-0.60494468011590041279;-0.58979814761114468524;0.42305247146063512664;-0.27589236841646153087;0.43810774257844808943;-0.24614605139376927179;1.4192773134337299812;-0.0083413502201828519655;0.63147727190253133411;1.7799414265709752048;0.22291722088938864532;1.4385161170766798122;-1.599867128240007208];
IW1_1 = [0.66523614799249863871 0.78159825176116848322 0.53671732296365548542 -0.543846867088050967 0.2485711649060191597 -0.83671516288366365455 0.12602446553492979708 -0.28728556056726856083 0.39432377350342179279 -1.1208325454339145288 0.17883906451635739332 -0.54005734937170946086 -0.87186506949007702705 0.94485807504058172412 0.36427525862761594988 -0.16482484423128421214 -1.2614036945743547502 -0.32186751603852614689 -0.45074666605281188403 -1.3855206401120889748 0.60860127225791404992 -0.33715759080704132966 -0.42679006443883893418 0.96637979812191343587 1.445447055014599691 0.57174883543908006089 -0.30396934177817647171;-0.18097005381716510519 0.71375825443291385231 0.65649607628805939363 0.11625601917996368495 0.61259831483985549561 -0.10737983680937430997 -0.58743969929788752982 -0.00066097043889704228115 -0.37596524054589508523 -0.24604932394271086804 0.23380718193323934972 -0.51894193228953222619 0.67265688385997668419 -0.35436311240935797207 -0.36952636150121126457 0.30115791139148695432 -0.38777286075238404095 -0.26071740617145816588 -0.59911215427558428548 0.60777130656422329036 -0.57013065625760417365 -0.61140595565922839505 -0.58688706177019112076 -0.50591610444534873547 0.80440905032957576992 0.45759199764343067018 -0.31298736735218185556;-1.0185753292814354598 -0.32418261377528262424 -0.49610424763649391133 1.2276667286706377524 -0.94078219619188074851 0.10324133462469065048 0.018163770315915039877 0.85644551674325197776 0.32047435299360171879 -1.1894854588256065231 0.66710851619150668412 -0.81594552675906806272 0.083902599915519279761 0.62322333413085750919 -0.17322378966713747328 0.442262691301852362 -0.62016901510240707296 -0.1702739585388361454 0.63793421395570348853 -2.0744400962442854919 0.71511121306576730383 -0.56537968439135899423 0.011470329504136938387 -0.76442816742707897504 -0.013358605420793959531 -0.25997533742628731179 0.18906928836308128927;-0.38939198118052142927 0.46232896032756537474 0.55151001692897461126 -0.12013900683298264771 1.4710682041090723526 -0.32452984744881707702 -0.61955887710294132997 0.43941662462665370681 -0.12231983586421318888 0.83542549339944116582 -0.98933868380519418562 0.49838351716996703855 -0.38834648119133446942 -0.75005097729440728394 -0.37510909152642368802 -0.21590963205203492215 -1.513229534595532666 0.017145337108034744422 0.0590145845606190253 0.65771760123561862077 -0.30114962132982397991 -0.43622150664242131946 -0.61553311597989313064 0.36225800962297866059 -0.20953537636874824956 -0.38417085571165437985 -0.38985756820016842505;0.08307492446123838914 -0.053406017744432446315 -0.26521971138606692531 0.057046676193256484755 0.23993908258165397296 0.11707253535550191104 0.07397654715057068453 0.0088311435339809389589 0.084172628760244921908 -0.18296706768000040033 0.23541298930362020148 -0.44188771053990655302 0.020121630212985221198 -0.68241149720551652624 -0.30295234843029100746 0.29930645855275439526 0.69709066851708101353 0.38265172922054696558 0.77572673321785623468 -0.25188603753949523334 0.16581940135218939392 0.44842103878732575417 0.042148556078519514023 0.89242400815724076679 0.5979853641985142243 0.023810970052782133577 0.11430697829434399715;-0.30936562349754359591 -0.33228350702990361309 -0.40253055570693663245 -0.40676846219481571643 0.11163833816496133988 0.3991807250594908707 -1.5820684825931077278 0.39067817385655811968 0.10153594431312663871 0.4424738755343248231 -0.25815909623325622446 1.7388348460765947756 0.065768395560073106276 0.099988551298592492911 0.58212356358104799803 -0.083477960160132480549 -0.97893781936484558504 0.28346666616064875033 1.1573204699643067084 -0.020156478706163601794 -0.72626365517966340324 1.2763819371836757632 0.68322904899132974599 0.098355550176844497301 -1.2058846978014328144 0.3640662573691321735 0.19102737864420815672;0.2160747428412272686 -0.86941135208392461564 0.85379667713020979125 -1.3585811214741481123 -0.49298111647126163781 -1.0289445859100914138 1.275977760286794771 -0.42991045823332302289 -0.52110036280165394906 0.10854842941167403003 0.30431592421274722415 -1.065940060814320578 -1.5391885404341576482 -0.2821541394444334605 -1.335335889391312536 -0.16679906078652442791 0.82105564260334795712 -0.75692379916829011233 -0.57804519339283244594 -0.334695932271995511 1.3740707056831580335 0.42463642386730171552 -0.74089009497723967712 0.25579832487269432706 -0.32048647242872907448 -0.090471587656753754692 -0.99026792328799118081;0.70083888861318544006 -0.479624270291430288 -0.17337929052791992146 -0.7902330186305760451 1.451677381067447925 0.037985206111949769425 0.37099054130146463804 -0.48691532309207946616 0.077734519722552394838 -0.35549952278651786308 0.69483402528091409156 0.31189086103514518378 0.2516802701099535855 1.0388598316602071225 0.96488492700357220144 -0.4929814990446206302 0.35785072067388157269 -0.51235349523119755322 -0.62365703872692079823 0.054612787188159490903 0.027516815584613739387 -0.18183560034968282437 -0.20016548185083965494 -0.42310172118031053046 0.26720265550050026349 0.095922922034039098671 0.73092737909715255196;0.45584595695626412004 -0.1947383263802139608 -0.31835976148166506006 0.4804547823669784723 -0.26394695167903037269 -0.024880615207169842068 0.33783020733485052967 -0.095433340001975425215 -0.11967465566189142145 0.12855092428076164701 0.230311315086716345 0.098225458850048755211 -0.12745385324145416805 -0.12689663857007968395 -0.16349967942173165847 0.61057628461958624033 -0.34884808107825404644 0.50774696975760402751 0.27383499620310686185 0.30505840991883526048 0.79355127327830699002 0.36215209527793840172 0.025702940168634773321 -0.19552539998045107006 -0.41004798019129734543 0.10253785053502120772 0.076541232593796956762;0.73045480549490870992 -0.93285366658273816132 -0.15085198884981732004 0.029438200183147536504 0.17423567110695975524 0.40099929291387953478 -0.30483595464482421411 0.52327571936311700895 -0.58630541987908812995 1.0275277673917142529 -0.97012266658047086043 0.21642585325066840407 -0.59962326366270768396 -1.2001696254547611353 0.44033337339986144965 -0.043723758610681555392 -0.23244057906764545307 0.73736594795603194186 -0.46862788888909712171 1.4801931625158468719 -0.72971306432751892324 0.30246729689688522935 0.33425481574187709821 0.8375692915862462673 -1.1606454533596615164 -1.3189285486051556262 -0.50467275453945648067;-0.2337579854256729428 -1.7181253171092805143 -0.065357662092300233825 -0.37697689601028028239 0.080858501162279092234 -0.31637835743294001611 -0.27541758046461639609 0.48225483687502507246 0.33105331971909490729 0.2964676754091756794 -0.45031970609932864269 0.12074037850861750465 0.16701591079551739161 -0.021925575695805631093 0.30882340470892621909 -0.025922927540420810655 0.22559619966513938527 0.095070532708090862983 0.89255671451175455644 0.48088074018518034425 -0.024001864812838034219 0.57849276970649698981 -0.7716600575121573824 0.12896755228283310335 -0.89986691848939648342 0.13619098445148658527 0.71168092401281068948;-1.0367930379795715634 -0.38445756319975787907 -0.12025893559794739729 0.31704386048912591711 0.85191192987625496968 -0.42833495324990200626 -0.34114533980499089916 0.51106493230817473528 0.31967610945251140331 0.62821727563373386261 0.33894905196781738299 -0.23519654731680544879 1.0326635097483696235 -0.23022529105404582195 1.797312305855746084 -0.37815426420600384283 0.26895853862713448024 0.61383921420073528363 0.98392979007894532106 0.45445795415587036947 -0.37665122457582472792 -0.042103300410868703396 0.087531952845059560198 -0.99958838417651252328 0.90798908072351469656 0.13686051258960779675 0.65414085700558510794;-1.6077467787980919134 -0.51305420047630523328 -0.52651578698106382692 0.46116726940874558371 1.6739526364911372358 -0.13420277793583468284 -0.97381232604907808081 0.83952560330219405671 0.36426448045578507795 1.1976922588497347366 -1.1602350897230422344 0.26495215607215033549 0.94725354542694384374 -0.10019851921509063952 0.98991371456705301579 -0.20713931686644987407 -0.73784023504366402779 -0.97559490320987163336 2.1057972824381803179 -0.015405297416405103195 -0.32874799310926250406 0.1042844082312107401 0.092238991898591624063 -0.032808863935457927008 -1.145241391163421385 0.59519211122283732784 0.29262197783957877295;1.6208159361170237922 0.23634668163974520416 -0.26627487817318679086 -0.40483152029713187492 0.34636329868105947272 1.5261253189480934456 0.32842201396774928224 -0.55788787376835058396 0.39118768245256263505 -0.67818582413580197343 -0.047320783289365418722 0.34945560390001434437 -0.57328814753494794498 1.1322749280625425961 1.1437852613319836603 -0.028787957574872138911 0.098963097057105847698 -0.58374199315895647366 -0.28259928432506931095 -0.40240062408482568657 -0.15563825067468009533 -0.12671506501696291891 1.5739754960431073805 1.3674551576413052079 0.40627279024617929393 0.56082461916091752574 0.28111937956036148201;-0.46344647749714112939 0.1109472918944956199 0.087569931827144564807 0.45303189932468979073 -0.21063370168444822683 0.18536539101443014199 0.96401123617385231501 -0.34203716788808147253 -1.7254330681758542898 -0.37422014086836402624 0.98881077044595322434 -0.029226909593093607781 -0.0041663991878954685991 0.12821196806731277595 -0.61597177406503733632 0.62856726338416935018 1.7196336351723588987 0.6207293649328130547 -1.7375324849099338387 0.42848541193358907764 0.61773937281922286502 -0.34402254902602463771 -0.82291338551422432701 -0.77425734144325919495 -0.3841449803238095595 -0.57846789546679400207 -0.41581134325916668804;-0.19923930425815791767 -0.70936441383313508791 -1.0399936579871598141 -0.27842765794739759988 0.34143739292624492032 0.44246078103803343495 0.31165025412357066914 0.86773294462011962835 -0.16211627846052015234 -0.21669201022356476827 0.48253331520414749489 0.51244722692328803504 0.31656764749600507791 1.0751029042756601317 0.20780176172033151816 -0.61324078767931955447 0.22778910751605352392 0.12627054326341655144 -0.55322611225447326788 1.1267831203605049861 0.71703344247161882041 -0.88418714499915551652 -0.10583247284368951791 -0.88071027495742060243 -0.95864827753922543518 0.04209740350814700216 0.27030391852889501525;1.2357807226975323633 -0.66580058031693123421 -0.52552299590324036416 -0.37895064833107738878 0.67700927946369804378 0.74541563943352018295 0.96363242267335669222 -0.24969269077560785064 0.38577959589013438579 0.45690820042252505706 -0.2057292826945046893 0.065786811406802703228 0.28209732321378511166 0.35699318093324028389 2.2732841111831114667 0.59313805399654762063 0.2919916210976375992 -0.75251099733856763319 0.18629038287249191641 0.074899077166289643182 0.67842540405672224768 0.0047341035465001176513 -0.31485032299521248378 1.0677754877167426883 0.97951866742957083289 0.15942833124114694221 0.54211003625221865221;0.15065930365211549491 -0.053426203765168808757 0.85373355277472606772 -0.65136984066175174224 0.19937073747320549488 -0.83060615289073191914 0.60638167872257719981 -0.53453308670755361742 0.21227447507456415066 0.93388179795355485968 -0.75949494228877234558 -0.2860263576292853549 -1.0147368516105612635 0.26358444464877556213 -1.3611132372601799645 0.13797752630401985408 0.15858945377557362444 -0.13539067535198964776 -0.053144804332074163655 0.99204246663286965724 0.04105964123805708188 -1.6461672115215697509 -0.62259981124238195083 0.16121682207502316397 0.59547417248607092954 0.39043394958827365437 -1.5276022090486294225;0.27086170619158306261 -0.27768180208757331506 -0.43560460950991719553 0.22518278361046217828 0.27014741665361358125 -0.36717394562364302768 -0.35355577021169343199 -0.36259674492957927328 0.42007150316880914609 -0.35106822505807072643 -0.25051483250959594162 0.27341723532781547767 -0.45173067719678172693 -0.34459540315734710214 -0.056514304313704480376 0.030339491358257437287 0.20091549477939621426 -0.3049981594510376981 -0.3686177236646139832 -0.29045126948019983626 -0.25761897900149072216 -0.35388585640029257551 0.49210080600989225541 0.10677780480482645942 -0.12265622231819925392 0.015926570953639085371 0.13893497303686289102;-0.16728255128205543611 0.086721539434195360485 0.40844801682316783653 0.44142772966645499322 0.25557448490378514849 0.41893582332166356963 0.39583794755622908612 -0.42973222818205242257 -0.31946041674308051084 0.16556094551544525695 0.61607779014937158468 0.40496002744143161367 0.13370078861795023362 0.1095837688803072002 0.31606929921978826892 0.050403951343338339319 -0.24016724763177763058 0.21485628824126248859 -0.034578278736561884887 0.2607523910666215694 0.31683570403786814884 -0.062565413531532193536 -0.42873390967102537052 -0.28721178926091756045 -0.11880832176895510244 -0.34565573152592260486 0.09514404277092917972];

% Layer 2
b2 = [-1.0951930360556250132;-0.70656228840727552942;-0.66062276158473143273;-0.71802022296173073634;0.39733940967125669363;-0.44155186187666861652;-0.37298385780101828146;-0.76642832723548770524;-0.32365038553170188962;-0.42369196782340662333;-0.50069258182925679979];
LW2_1 = [-1.0871571009370690764 -0.71252677764956162676 0.3510362065701332912 -0.11043481681495348479 0.31971426622225812553 1.0939181908666617549 0.66113730618078070389 -0.89642661415153435112 -0.12090721355284222982 1.7593453809982797509 0.44951006020441841571 -0.66789939049518920466 -0.38257984228653896253 -1.3360063682914202765 0.88167507704938752333 -1.017858628275807753 -2.103804269501790003 -2.3636057251840267845 0.12841710232531228231 0.87401262704311655227;2.2065647930603802251 -0.75383942367842182719 2.080953254220504256 -1.389109100530386165 0.050566098323740565901 -0.2935274846483028055 2.0024627163795485352 -0.49482266074550995683 0.041662684061665615498 -2.7006917704181279127 -0.31613243527791928811 -0.79034745903492364949 -0.92340254636444418779 -0.020287972027940883585 -0.096461750076453689484 0.058084228942865717693 -1.2300989967737834263 0.62587529180184331423 -0.19334962770564431689 -0.3861402058289417627;-0.31524592133940998462 -0.4638336183455534778 1.527817278094832476 -0.043088531448886149833 -0.55532404749529906685 1.5926372050925849955 -2.3574019438878215382 -0.53469430713302568137 -0.91556663051097186834 -0.52453408965641268313 -0.60718885281688272926 -0.53469474718235732169 0.5190192706321532512 0.43856619455926609819 -1.358189942938072603 1.217627191912039164 -1.5494203885334749682 -1.7576773305203783337 -0.75271586522838218603 -1.0145770242047764675;2.254978477043830587 -0.51186639910611286819 -1.339110261310771488 0.32345610853282635855 0.31954009024796026228 0.095178435907629865831 1.4620022389899012261 0.67450063786216152284 -0.44555225544590548736 1.3184999057268196321 -0.0098462505667096418549 -1.9694032767305271747 -0.81282088150429721018 1.2851812855602875452 -1.6171492436587076025 -1.4185025248286740052 2.3682509486233178642 0.029018395748216629926 -0.12193010318682280524 0.056283883796777962882;1.6523411667871752417 1.7580891535408116333 -0.62568001385305971329 1.3886526606220481739 -0.24044227381275296018 -1.3597432719934468004 0.086886289719388096198 0.32546410843414225189 0.43708585123127635663 -0.67770360700427867418 -1.2939352163799089368 0.28523121569710696566 -0.62781662422118067468 -2.3930591333634181339 0.41883156650818326172 -2.0618451803370896336 -0.37589025043768942158 0.020691554272382547963 -0.53841676783492109504 -0.84977110223309537673;-1.25276760746086957 0.81652232881875408399 -1.1539338330647594955 -0.13377667458761327568 0.50244250339819995776 -0.43801795003635646264 -0.15798074489080490834 -0.65392053674839778488 0.55996931788244364014 2.4658447602052278036 -1.111836536500001138 -0.73934055446483359919 -1.6349781273134325055 -1.8364103911830071958 1.857840633207886949 1.5514885271759804031 -1.2236443557628959855 2.558562816907850479 0.40786708042036345923 0.45329058186148962761;-0.73369374203727022454 -0.50292032952436116489 0.6924933885799960942 1.7103371091794332681 0.98454682943295590558 1.3215411682677717931 0.50607248870472643087 -1.2049253822516903245 0.045135404986521285298 0.75708629154227080615 0.58467217569480778305 -0.84033930789064237299 2.8672874952207929589 -1.5375147019873756093 -1.120361271723071539 0.62795000533001343879 -1.515452993649643032 1.8693392579400112119 -0.013761209844339320624 0.44103997049673088204;-0.87013526297011434263 0.18185634176686527042 -1.0268610071512618287 -0.018040431438384726959 -0.83261916678719227747 -0.037571465440868506702 -0.37266960728656245427 1.5836326635868860357 -1.02933597890534001 1.3934222267369711368 1.5301769896449577413 2.2268804993811408544 0.70200346366411769949 -1.9817568165908823197 0.16116740902947956915 0.42969421127567181129 1.553691529413205874 -1.7416286440656709722 -0.48501940803526871759 -0.29376004303254432681;-0.066570485264478090892 0.74890016526437030997 -1.3948314467051476928 0.49322168101987762245 0.064655012255818655742 2.0091505753776637277 -0.89899131603317550265 1.2748146924810785929 0.69064477200491647402 -0.861670168709495643 0.42777346458600190582 0.63888961390017795505 1.5960052283473646906 1.8073797326428107102 -1.3178742144612225484 1.9028049612863260354 0.53148778610694114022 1.5575616074289748703 0.40844320338500417211 -0.15054002440450645062;-0.77188871054677654637 0.10330963090501416035 -0.92042164923159219825 -1.7635369877677604666 1.3586981586836857083 -1.2749679698316633836 -1.8303638322292627993 -1.0145070964006941416 0.01907308852103680244 0.96314753768482563867 -0.18324983800000579914 1.3234013069064980428 0.24651978722223868989 1.2629876982121401863 -0.24671115707593566091 -1.0826137065268941484 0.6044744165531825697 0.031919657279523998283 0.22850645420042287048 -0.41652911610718679203;-0.63039224385326875222 -0.79914273739168839583 0.76289715887583031684 -2.3265986694645994781 -0.13423445042112139292 -0.48309938385647038794 0.38232763886341802895 0.73550546122613524869 0.26472939649483412383 -0.2559416562434227993 -0.13393280607472227151 -0.58094879564394141802 0.12964431131394921204 2.3225010494269864303 1.8898800162123763347 1.6320830686947689347 2.5958697177961620461 -0.54011123119345350041 0.41038787462391546068 0.47827433389056006607];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = softmax_apply(repmat(b2,1,Q) + LW2_1*a1);

% Output 1
y1 = to_labelid_vector(a2');
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Competitive Soft Transfer Function
function a = softmax_apply(n)
nmax = max(n,[],1);
n = bsxfun(@minus,n,nmax);
numer = exp(n);
denom = sum(numer,1);
denom(denom == 0) = 1;
a = bsxfun(@rdivide,numer,denom);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end